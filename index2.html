<!DOCTYPE html>
<html>
    <head>
        <title>Keyracer Demo!</title>
    </head>
    
    <body onload="init();">
        <p align="center">
        <canvas id="game_canvas" width="801" height="501"/>
        </p>
    </body>
    
    <script type="text/javascript">         
        var input = "There's quite a bit of code here but in a nutshell it just creates a new DOM element that will be positioned on top of the editor to represent cursor position. Then we just initialize some defaults (start and end of the selection). There's quite a bit of code here but in a nutshell it just creates a new DOM element that will be positioned on top of the editor to represent cursor position. Then we just initialize some defaults (start and end of the selection).";
        
        function init() {
            var text = input.substring(0, 320);
            game_context = document.getElementById("game_canvas").getContext("2d");
            game_context = game_grid_generate(game_context);
            game_context = game_grid_fill(game_context, text);
        }

        function game_grid_generate(game_context) {        
            for(var x = 0.5; x <= 801; x += 25) {
                game_context.moveTo(x, 0);
                game_context.lineTo(x, 500);
            }
            for(var y = 0.5; y <= 501; y += 25) {
                game_context.moveTo(0, y);
                game_context.lineTo(800, y);
            }
            game_context.strokeStyle = "#ddd";
            game_context.stroke();
            return game_context;
        }
        
        function game_grid_fill(game_context, text) {
            game_context.font = "16px Monospace";
            game_context.textAlign = "center";
            var charList = text.split('');
            var index = 0;
            
            for(var y = 18; y < 501; y += 50) {
                for(var x = 13; x < 801; x += 25) {
                    game_context.fillText(charList[index], x, y);
                    index++;
                    if(index == charList.length)
                        return game_context;
                }
            }
            
            return game_context;
        }
        
        /*function fillWrappedText(context, text, x, y) {
            context.font = "18px Monospace";

            var words = text.split(' ');
            var line = '';
            for(var index = 0; index < words.length; index++) {
                var currentLine = line + words[index] + ' ';
                var currentWidth = context.measureText(currentLine).width;
                if(currentWidth > 760 && index > 0) {
                    context.fillText(line, x, y);
                    line = words[index] + ' ';
                    y += 30;
                }
                else
                    line = currentLine;
            }
            context.fillText(line, x, y);
        }
        */
        function setupPlayer(text) {
               
        }
        
    </script>
    
</html>