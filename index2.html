<!DOCTYPE html>
<html>
    <head>
        <title>Keyracer Demo!</title>
    </head>
    
    <body onload="init();">
        <p align="center">
        <canvas id="game_canvas" width="801" height="501"/>
        <script>game_start();</script>
        </p>
    </body>
    
    <script type="text/javascript">
        
        
        var input = "There's quite a bit of code here but in a nutshell it just creates a new DOM element that will be positioned on top of the editor to represent cursor position. Then we just initialize some defaults (start and end of the selection). There's quite a bit of code here but in a nutshell it just creates a new DOM element that will be positioned on top of the editor to represent cursor position. Then we just initialize some defaults (start and end of the selection).";

        var game_context, charList, cursorColor;
        function init() {
            charList = input.substring(0, 320);
            cursorColor = "rgba(0, 255, 0, 0.2)";
            document.getElementById("game_canvas").getContext("2d");
            game_grid_generate();
            game_grid_fill_text();
        }

        function game_grid_generate() {        
            for(var x = 0.5; x <= 801; x += 25) {
                game_context.moveTo(x, 0);
                game_context.lineTo(x, 500);
            }
            for(var y = 0.5; y <= 501; y += 25) {
                game_context.moveTo(0, y);
                game_context.lineTo(800, y);
            }
            game_context.strokeStyle = "#ddd";
            game_context.stroke();
        }
        
        function game_grid_fill_text() {
            game_context.font = "16px Monospace";
            game_context.textAlign = "center";
            var index = 0;
            for(var y = 18; y < 501; y += 50) {
                for(var x = 13; x < 801; x += 25) {
                    game_context.fillText(charList[index], x, y);
                    index++;
                }
            }
        }   
        
        function game_start() {
            
            // Color the first box
            var transparent = "rgba(0, 0, 0, 0)";
            game_context.fillStyle = cursorColor;
            game_context.fillRect(1, 1, 24, 24);
            
            // To keep track of where we are
            var index = 0, x = 1, y = 1;
            
            // Gets keypress event from window
            window.addEventListener("keypress", function(e) {
                // Checks what user typed
                    
                // If correct key is pressed
                if(e.keyCode == charList[index].keyCode) {
                        index++;
                            
                // Clear current block
                game_context.fillStyle = transparent;
                game_context.fillRect(x, y, 24, 24);
                
                /*
                // Position to next block
                x = x + 25;
                if(x > 800) {
                    x = 1;
                    y = y + 50;
                }
                    
                // Fill the new block
                game_context.fillStyle = cursorColor;
                game_context.fillRect(x, y, 24, 24);
                */
                }
                
                // Else do nothing
            }, false);
        }
        
    </script>
    
</html>